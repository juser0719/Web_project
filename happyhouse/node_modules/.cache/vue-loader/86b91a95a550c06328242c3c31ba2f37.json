{"remainingRequest":"/Users/jeon-ungjae/Desktop/woong/Coding/Web_project/happyhouse/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeon-ungjae/Desktop/woong/Coding/Web_project/happyhouse/src/components/notice/comment/CommentWrite.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Web_project/happyhouse/src/components/notice/comment/CommentWrite.vue","mtime":1637885291391},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Web_project/happyhouse/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Web_project/happyhouse/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Web_project/happyhouse/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Web_project/happyhouse/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgaHR0cCBmcm9tICJAL3V0aWwvaHR0cC1jb21tb24iOw0KaW1wb3J0IHsgd3JpdGVDb21tZW50LCBnZXRDb21tZW50LCBtb2RpZnlDb21tZW50IH0gZnJvbSAiQC9hcGkvY29tbWVudCI7DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQpjb25zdCBtZW1iZXJTdG9yZSA9ICJtZW1iZXJTdG9yZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImNvbW1lbnR3cml0ZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOywqO2bhCDsnpHshLHsnpAg7J2066aE7J2AIOuhnOq3uOyduCDqtaztmITtm4Qg66Gc6re47J247ZWcIOyCrOyaqeyekOuhnCDrsJTqvrzri6QuDQogICAgICB1c2VyaWQ6ICIiLA0KICAgICAgY29tbWVudDogIiIsDQogICAgICBub3RpY2VObzogIiIsDQogICAgfTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMobWVtYmVyU3RvcmUsIFsiY2hlY2tVc2VySW5mbyJdKSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBjb25zb2xlLmxvZygiY3JlYXRlZF9DVyIpOw0KICAgIGNvbnNvbGUubG9nKHRoaXMuY2hlY2tVc2VySW5mbyk7DQogICAgdGhpcy51c2VyaWQgPSB0aGlzLmNoZWNrVXNlckluZm8udXNlcmlkOw0KICAgIHRoaXMubm90aWNlTm8gPSB0aGlzLiRyb3V0ZS5wYXJhbXMubm90aWNlbm87DQogIH0sDQogIHByb3BzOiB7DQogICAgbm90aWNlbm86IHsgdHlwZTogU3RyaW5nIH0sDQogICAgbW9kaWZ5Q29tbWVudDogeyB0eXBlOiBPYmplY3QgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlZ2lzdENvbW1lbnQoKSB7DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgdXNlcmlkOiB0aGlzLnVzZXJpZCwNCiAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LA0KICAgICAgICBub3RpY2VubzogdGhpcy5ub3RpY2VObywNCiAgICAgIH07DQogICAgICB3cml0ZUNvbW1lbnQocGFyYW0sICh7IGRhdGEgfSkgPT4gew0KICAgICAgICBsZXQgbXNnID0gIuuTseuhnSDsspjrpqzsi5wg66y47KCc6rCAIOuwnOyDne2WiOyKteuLiOuLpC4iOw0KICAgICAgICBpZiAoZGF0YSA9PT0gInN1Y2Nlc3MiKSB7DQogICAgICAgICAgbXNnID0gIuuTseuhneydtCDsmYTro4zrkJjsl4jsirXri4jri6QuIjsNCiAgICAgICAgfQ0KICAgICAgICBhbGVydChtc2cpOw0KICAgICAgICAvLyDsnpHshLHquIAg7KeA7Jqw6riwDQogICAgICAgIHRoaXMuY29tbWVudCA9ICIiOw0KDQogICAgICAgIC8vIOuPhOyEnO2PiSjrjJPquIApIOyWu+q4sC4NCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goZ2V0Q29tbWVudCgpKTsNCiAgICAgICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldENvbW1lbnRzIiwgYC9jb21tZW50LyR7dGhpcy5hcnRpY2xlbm99YCk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIHVwZGF0ZUNvbW1lbnQoKSB7DQogICAgICBtb2RpZnlDb21tZW50KA0KICAgICAgICB7DQogICAgICAgICAgY29tbWVudF9ubzogdGhpcy5tb2RpZnlDb21tZW50LmNvbW1lbnRfbm8sDQogICAgICAgICAgbm90aWNlbm86IHRoaXMubW9kaWZ5Q29tbWVudC5ub3RpY2VubywNCiAgICAgICAgICBjb21tZW50OiB0aGlzLm1vZGlmeUNvbW1lbnQuY29tbWVudCwNCiAgICAgICAgfSwNCiAgICAgICAgKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgbGV0IG1zZyA9ICLsiJjsoJUg7LKY66as7IucIOusuOygnOqwgCDrsJzsg53tlojsirXri4jri6QuIjsNCiAgICAgICAgICBpZiAoZGF0YSA9PT0gInN1Y2Nlc3MiKSB7DQogICAgICAgICAgICBtc2cgPSAi7IiY7KCV7J20IOyZhOujjOuQmOyXiOyKteuLiOuLpC4iOw0KICAgICAgICAgIH0NCiAgICAgICAgICBhbGVydChtc2cpOw0KDQogICAgICAgICAgLy8g64+E7ISc7Y+JKOuMk+q4gCkg7Ja76riwLg0KICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKGdldENvbW1lbnQoKSk7DQogICAgICAgICAgdGhpcy4kZW1pdCgibW9kaWZ5LWNvbW1lbnQtY2FuY2VsIiwgZmFsc2UpOw0KICAgICAgICB9DQogICAgICApOw0KICAgIH0sDQogICAgdXBkYXRlQ29tbWVudENhbmNlbCgpIHsNCiAgICAgIHRoaXMuJGVtaXQoIm1vZGlmeS1jb21tZW50LWNhbmNlbCIsIGZhbHNlKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["CommentWrite.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommentWrite.vue","sourceRoot":"src/components/notice/comment","sourcesContent":["<template>\r\n  <b-row v-if=\"this.modifyComment != null\" class=\"mb-3 mt-2\">\r\n    <b-col cols=\"10\">\r\n      <b-form-textarea\r\n        id=\"comment\"\r\n        placeholder=\"도서평 입력...\"\r\n        v-model=\"modifyComment.comment\"\r\n        rows=\"2\"\r\n      ></b-form-textarea>\r\n    </b-col>\r\n    <b-col>\r\n      <b-button variant=\"outline-info\" class=\"mr-2 h-100\" @click=\"updateComment\"\r\n        >수정</b-button\r\n      >\r\n      <b-button\r\n        variant=\"outline-danger\"\r\n        class=\"h-100\"\r\n        @click=\"updateCommentCancel\"\r\n        >취소</b-button\r\n      >\r\n    </b-col>\r\n  </b-row>\r\n  <b-row v-else class=\"mb-3 mt-2\">\r\n    <b-col cols=\"11\">\r\n      <b-form-textarea\r\n        id=\"comment\"\r\n        placeholder=\"댓글 입력...\"\r\n        v-model=\"comment\"\r\n        rows=\"2\"\r\n      ></b-form-textarea>\r\n    </b-col>\r\n    <b-col\r\n      ><b-button variant=\"dark\" class=\"h-100\" @click=\"registComment\"\r\n        >등록</b-button\r\n      ></b-col\r\n    >\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\n// import http from \"@/util/http-common\";\r\nimport { writeComment, getComment, modifyComment } from \"@/api/comment\";\r\nimport { mapGetters } from \"vuex\";\r\nconst memberStore = \"memberStore\";\r\n\r\nexport default {\r\n  name: \"commentwrite\",\r\n  data() {\r\n    return {\r\n      // 차후 작성자 이름은 로그인 구현후 로그인한 사용자로 바꾼다.\r\n      userid: \"\",\r\n      comment: \"\",\r\n      noticeNo: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters(memberStore, [\"checkUserInfo\"]),\r\n  },\r\n  created() {\r\n    console.log(\"created_CW\");\r\n    console.log(this.checkUserInfo);\r\n    this.userid = this.checkUserInfo.userid;\r\n    this.noticeNo = this.$route.params.noticeno;\r\n  },\r\n  props: {\r\n    noticeno: { type: String },\r\n    modifyComment: { type: Object },\r\n  },\r\n  methods: {\r\n    registComment() {\r\n      const param = {\r\n        userid: this.userid,\r\n        comment: this.comment,\r\n        noticeno: this.noticeNo,\r\n      };\r\n      writeComment(param, ({ data }) => {\r\n        let msg = \"등록 처리시 문제가 발생했습니다.\";\r\n        if (data === \"success\") {\r\n          msg = \"등록이 완료되었습니다.\";\r\n        }\r\n        alert(msg);\r\n        // 작성글 지우기\r\n        this.comment = \"\";\r\n\r\n        // 도서평(댓글) 얻기.\r\n        this.$store.dispatch(getComment());\r\n        // this.$store.dispatch(\"getComments\", `/comment/${this.articleno}`);\r\n      });\r\n    },\r\n    updateComment() {\r\n      modifyComment(\r\n        {\r\n          comment_no: this.modifyComment.comment_no,\r\n          noticeno: this.modifyComment.noticeno,\r\n          comment: this.modifyComment.comment,\r\n        },\r\n        ({ data }) => {\r\n          let msg = \"수정 처리시 문제가 발생했습니다.\";\r\n          if (data === \"success\") {\r\n            msg = \"수정이 완료되었습니다.\";\r\n          }\r\n          alert(msg);\r\n\r\n          // 도서평(댓글) 얻기.\r\n          this.$store.dispatch(getComment());\r\n          this.$emit(\"modify-comment-cancel\", false);\r\n        }\r\n      );\r\n    },\r\n    updateCommentCancel() {\r\n      this.$emit(\"modify-comment-cancel\", false);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}